(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();function k(e){const{name:n,label:i,options:t}=e,r=`
    <select name="${n}" class="select">
      <option class="select__option" value="" disabled selected>${i}</option>
      ${t.reduce((s,d)=>s+=`<option class="select__option" value="${d.value}">${d.text}</option>`,"")}
    </select>
  `,o=document.createElement("div");return o.innerHTML=r,o.firstElementChild}function F(){return k({name:"route",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435",options:[{value:"forward",text:"\u0438\u0437 A \u0432 B"},{value:"back",text:"\u0438\u0437 B \u0432 A"},{value:"both",text:"\u0438\u0437 A \u0432 B \u0438 \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0410"}]})}function h(e,n,i){const t=e.split(":").map(o=>+o);let r=0;return t[1]=t[1]+i,t[1]>59&&(t[1]=t[1]%60,r=1),t[0]=(t[0]+n+r)%24,t.map(o=>o<=9?`0${o}`:o).join(":")}function w(e,n,i){const t=e.split(":").map(o=>+o);let r=0;return t[1]=t[1]-i,console.log(t[1]),t[1]<0&&(t[1]=t[1]+60,r=1),t[0]=t[0]-n-r,t[0]=t[0]<0?t[0]+24:t[0],t.map(o=>o<=9?`0${o}`:o).join(":")}window.timDiff=w;function b(e){const n=new Date().getHours()-new Date().getUTCHours()-3;let i=e.replace(/(\d\d?:\d\d).+/,"$1").split(":").map(t=>+t);return i[0]=(i[0]+n)%24,i=i.map(t=>t<=9?`0${t}`:t).join(":"),i}function g(e,n,i){if(e==="")return;let t=e.replace(/(\d\d?:\d\d).+/,"$1");t=i==="forward"?w(t,0,50):h(t,0,50),t=t.split(":").map(r=>+r),n.childNodes.forEach((r,o)=>{if(r.nodeName!=="OPTION"||r.nodeName==="OPTION"&&!r.value)return;r.disabled=!1;const s=r.value.replace(/(\d\d?:\d\d).+/,"$1").split(":").map(E=>+E),d=i==="forward"?s[0]>t[0]:s[0]<t[0],S=i==="forward"?s[0]===t[0]&&s[1]>=t[1]:s[0]===t[0]&&s[1]<=t[1];d&&(r.disabled=!0),S&&(r.disabled=!0),r.disabled&&r.selected&&(n.value="")})}function B(e){e.childNodes.forEach((n,i)=>{n.nodeName==="OPTION"&&(n.nodeName==="OPTION"&&!n.value||(n.disabled=!1))})}function M(e,n){let i=`${e} ${n.moreThanFive}`;return e===0?i=`${e} ${n.moreThanFive}`:(e%100<5||e%100>20)&&(i=e%10===1?`${e} ${n.one}`:`${e} ${n.twoToFour}`),i}const N=["18:30","18:45","19:00","19:15","19:35","21:50","21:55"];function A(e){return e.map(n=>({value:`${n}(\u0438\u0437 B \u0432 A)`,text:`${b(n)}(\u0438\u0437 B \u0432 A)`}))}function _(){const e={name:"time-back",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0432\u044B\u0435\u0437\u0434\u0430 \u0438\u0437 B \u0432 A",options:A(N)};return k(e)}const x=["18:00","18:30","18:45","19:00","19:15","21:00"];function C(e){return e.map(n=>({value:`${n}(\u0438\u0437 A \u0432 B)`,text:`${b(n)}(\u0438\u0437 A \u0432 B)`}))}function O(){const e={name:"time-forward",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0432\u044B\u0435\u0437\u0434\u0430 \u0438\u0437 A \u0432 B",options:C(x)};return k(e)}function D(){const e='<input name="tickets" type="number" placeholder="\u0412\u0432\u0435\u0434\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432..." class="input-num" min="0">',n=document.createElement("div");return n.innerHTML=e,n.firstElementChild}function q(e){const n=`<button type="submit" class="button">${e}</button>`,i=document.createElement("div");return i.innerHTML=n,i.firstElementChild}function I(e){const{count:n,direction:i,sum:t,time:r,timeForward:o,timeBack:s}=e;return console.log(s),`
    <h2 class="subtitle">\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442</h2>
    <p class="result__text">\u0412\u044B \u0432\u044B\u0431\u0440\u0430\u043B\u0438 <strong>${M(n,{one:"\u0431\u0438\u043B\u0435\u0442",twoToFour:"\u0431\u0438\u043B\u0435\u0442\u0430",moreThanFive:"\u0431\u0438\u043B\u0435\u0442\u043E\u0432"})}</strong> \u043F\u043E \u043C\u0430\u0440\u0448\u0440\u0443\u0442\u0443 <strong>${i}</strong> \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C\u044E <strong>${t}</strong></p>
    <p class="result__text">\u042D\u0442\u043E \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 \u0443 \u0432\u0430\u0441 <strong>${r}</strong>.</p>
    ${o?`<p class="result__text">\u0422\u0435\u043F\u043B\u043E\u0445\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0438\u0437 \u0442\u043E\u0447\u043A\u0438 \u0410 \u0432 <strong>${o}</strong> \u0438 \u043F\u0440\u0438\u0431\u044B\u0432\u0430\u0435\u0442 \u0432 \u0442\u043E\u0447\u043A\u0443 \u0412 \u0432 <strong>${h(o,0,50)}</strong></p>`:""}
    ${s?`<p class="result__text">\u0422\u0435\u043F\u043B\u043E\u0445\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0438\u0437 \u0442\u043E\u0447\u043A\u0438 B \u0432 <strong>${s}</strong> \u0438 \u043F\u0440\u0438\u0431\u044B\u0432\u0430\u0435\u0442 \u0432 \u0442\u043E\u0447\u043A\u0443 \u0410 \u0432 <strong>${h(s,0,50)}</strong></p>`:""}   
  `}const P=document.querySelector(".direction"),m=document.querySelector(".time-forward"),f=document.querySelector(".time-back"),a=document.querySelector(".tickets"),v=document.querySelector(".complete"),T=document.querySelector(".result"),z=document.querySelector(".main__form");z.addEventListener("submit",e=>{e.preventDefault();let n="",i="50 \u043C\u0438\u043D\u0443\u0442",t=700;switch(c.direction){case"forward":n="\u0438\u0437 A \u0432 B";break;case"back":n="\u0438\u0437 B \u0432 A";break;case"both":n="\u0438\u0437 A \u0432 B \u0438 \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0410",i="1 \u0447\u0430\u0441 40 \u043C\u0438\u043D\u0443\u0442",t=1200;break}const r=+c.ticketCount*t;let o="";c.timeForward&&(o=b(c.timeForward));let s="";c.timeBack&&(s=b(c.timeBack)),T.innerHTML=I({count:c.ticketCount,direction:n,sum:r,time:i,timeForward:o,timeBack:s})});window.timeSum=h;let c={direction:"",timeForward:"",timeBack:"",ticketCount:0};window.state=c;const L=F();L.addEventListener("change",e=>{c.direction=e.target.value,K(c.direction)});const l=O();l.addEventListener("change",e=>{c.timeForward=e.target.value,y(c.direction,c.timeForward,c.timeBack),c.direction==="both"&&g(c.timeForward,u,"back")});const u=_();u.addEventListener("change",e=>{c.timeBack=e.target.value,y(c.direction,c.timeForward,c.timeBack),c.direction==="both"&&g(c.timeBack,l,"forward")});const p=D();p.addEventListener("input",e=>{c.ticketCount=+e.target.value,j(c.ticketCount)});const G=q("\u041F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C");P.append(L);function K(e){switch(H(),R(),$(),B(u),B(l),e){case"forward":m.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0410 \u0432 \u0412</h2>',m.append(l);break;case"back":f.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0412 \u0432 \u0410</h2>',f.append(u);break;case"both":m.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0410 \u0432 \u0412</h2>',m.append(l),f.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0412 \u0432 \u0410</h2>',f.append(u);break}}function R(){U(),m.innerHTML="",f.innerHTML="",l.value="",u.value="",c.timeForward="",c.timeBack=""}function y(e,n,i){$(),e==="forward"&&n&&(a.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',a.append(p)),e==="back"&&i&&(a.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',a.append(p)),e==="both"&&n&&i&&(a.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',a.append(p))}function U(){a.innerHTML="",p.value=0,c.ticketCost=0}function j(e){$(),e>0?v.append(G):H()}function H(){v.innerHTML=""}function $(){T.innerHTML=""}
