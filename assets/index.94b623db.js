(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function i(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(o){if(o.ep)return;o.ep=!0;const r=i(o);fetch(o.href,r)}})();function k(e){const{name:n,label:i,options:t}=e,o=`
    <select name="${n}" class="select">
      <option class="select__option" value="" disabled selected>${i}</option>
      ${t.reduce((s,a)=>s+=`<option class="select__option" value="${a.value}">${a.text}</option>`,"")}
    </select>
  `,r=document.createElement("div");return r.innerHTML=o,r.firstElementChild}function F(){return k({name:"route",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435",options:[{value:"forward",text:"\u0438\u0437 A \u0432 B"},{value:"back",text:"\u0438\u0437 B \u0432 A"},{value:"both",text:"\u0438\u0437 A \u0432 B \u0438 \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0410"}]})}function h(e,n,i){const t=e.split(":").map(r=>+r);let o=0;return t[1]=t[1]+i,t[1]>59&&(t[1]=t[1]%60,o=1),t[0]=(t[0]+n+o)%24,t.map(r=>r<=9?`0${r}`:r).join(":")}function B(e,n,i){const t=e.split(":").map(r=>+r);let o=0;return t[1]=t[1]-i,console.log(t[1]),t[1]<0&&(t[1]=t[1]+60,o=1),t[0]=t[0]-n-o,t[0]=t[0]<0?t[0]+24:t[0],t.map(r=>r<=9?`0${r}`:r).join(":")}window.timDiff=B;function b(e){const n=new Date().getHours()-new Date().getUTCHours()-3;let i=e.replace(/(\d\d?:\d\d).+/,"$1").split(":").map(t=>+t);return i[0]=(i[0]+n)%24,i=i.map(t=>t<=9?`0${t}`:t).join(":"),i}function w(e,n,i){if(e==="")return;let t=e.replace(/(\d\d?:\d\d).+/,"$1");t=i==="forward"?B(t,0,50):h(t,0,50),t=t.split(":").map(o=>+o),n.childNodes.forEach(o=>{if(o.disabled=!1,o.nodeName!=="OPTION")return;const r=o.value.replace(/(\d\d?:\d\d).+/,"$1").split(":").map(H=>+H),s=i==="forward"?r[0]>t[0]:r[0]<t[0],a=i==="forward"?r[0]===t[0]&&r[1]>=t[1]:r[0]===t[0]&&r[1]<=t[1];s&&(o.disabled=!0),a&&(o.disabled=!0),o.disabled&&o.selected&&(n.value="")})}function M(e,n){let i=`${e} ${n.moreThanFive}`;return e===0?i=`${e} ${n.moreThanFive}`:(e%100<5||e%100>20)&&(i=e%10===1?`${e} ${n.one}`:`${e} ${n.twoToFour}`),i}const S=["18:30","18:45","19:00","19:15","19:35","21:50","21:55"];function E(e){return e.map(n=>({value:`${n}(\u0438\u0437 B \u0432 A)`,text:`${b(n)}(\u0438\u0437 B \u0432 A)`}))}function A(){const e={name:"time-back",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0432\u044B\u0435\u0437\u0434\u0430 \u0438\u0437 B \u0432 A",options:E(S)};return k(e)}const _=["18:00","18:30","18:45","19:00","19:15","21:00"];function C(e){return e.map(n=>({value:`${n}(\u0438\u0437 A \u0432 B)`,text:`${b(n)}(\u0438\u0437 A \u0432 B)`}))}function x(){const e={name:"time-forward",label:"\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0432\u044B\u0435\u0437\u0434\u0430 \u0438\u0437 A \u0432 B",options:C(_)};return k(e)}function D(){const e='<input name="tickets" type="number" placeholder="\u0412\u0432\u0435\u0434\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432..." class="input-num" min="0">',n=document.createElement("div");return n.innerHTML=e,n.firstElementChild}function N(e){const n=`<button type="submit" class="button">${e}</button>`,i=document.createElement("div");return i.innerHTML=n,i.firstElementChild}function q(e){const{count:n,direction:i,sum:t,time:o,timeForward:r,timeBack:s}=e;return console.log(s),`
    <h2 class="subtitle">\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442</h2>
    <p class="result__text">\u0412\u044B \u0432\u044B\u0431\u0440\u0430\u043B\u0438 <strong>${M(n,{one:"\u0431\u0438\u043B\u0435\u0442",twoToFour:"\u0431\u0438\u043B\u0435\u0442\u0430",moreThanFive:"\u0431\u0438\u043B\u0435\u0442\u043E\u0432"})}</strong> \u043F\u043E \u043C\u0430\u0440\u0448\u0440\u0443\u0442\u0443 <strong>${i}</strong> \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C\u044E <strong>${t}</strong></p>
    <p class="result__text">\u042D\u0442\u043E \u043F\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435 \u0437\u0430\u0439\u043C\u0435\u0442 \u0443 \u0432\u0430\u0441 <strong>${o}</strong>.</p>
    ${r?`<p class="result__text">\u0422\u0435\u043F\u043B\u043E\u0445\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0438\u0437 \u0442\u043E\u0447\u043A\u0438 \u0410 \u0432 <strong>${r}</strong> \u0438 \u043F\u0440\u0438\u0431\u044B\u0432\u0430\u0435\u0442 \u0432 \u0442\u043E\u0447\u043A\u0443 \u0412 \u0432 <strong>${h(r,0,50)}</strong></p>`:""}
    ${s?`<p class="result__text">\u0422\u0435\u043F\u043B\u043E\u0445\u043E\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u0438\u0437 \u0442\u043E\u0447\u043A\u0438 B \u0432 <strong>${s}</strong> \u0438 \u043F\u0440\u0438\u0431\u044B\u0432\u0430\u0435\u0442 \u0432 \u0442\u043E\u0447\u043A\u0443 \u0410 \u0432 <strong>${h(s,0,50)}</strong></p>`:""}   
  `}const O=document.querySelector(".direction"),u=document.querySelector(".time-forward"),d=document.querySelector(".time-back"),l=document.querySelector(".tickets"),g=document.querySelector(".complete"),v=document.querySelector(".result"),I=document.querySelector(".main__form");I.addEventListener("submit",e=>{e.preventDefault();let n="",i="50 \u043C\u0438\u043D\u0443\u0442",t=700;switch(c.direction){case"forward":n="\u0438\u0437 A \u0432 B";break;case"back":n="\u0438\u0437 B \u0432 A";break;case"both":n="\u0438\u0437 A \u0432 B \u0438 \u043E\u0431\u0440\u0430\u0442\u043D\u043E \u0432 \u0410",i="1 \u0447\u0430\u0441 40 \u043C\u0438\u043D\u0443\u0442",t=1200;break}const o=+c.ticketCount*t;let r="";c.timeForward&&(r=b(c.timeForward));let s="";c.timeBack&&(s=b(c.timeBack)),v.innerHTML=q({count:c.ticketCount,direction:n,sum:o,time:i,timeForward:r,timeBack:s})});window.timeSum=h;let c={direction:"",timeForward:"",timeBack:"",ticketCount:0};window.state=c;const T=F();T.addEventListener("change",e=>{c.direction=e.target.value,z(c.direction)});const f=x();f.addEventListener("change",e=>{c.timeForward=e.target.value,L(c.direction,c.timeForward,c.timeBack),c.direction==="both"&&w(c.timeForward,p,"back")});const p=A();p.addEventListener("change",e=>{c.timeBack=e.target.value,L(c.direction,c.timeForward,c.timeBack),c.direction==="both"&&w(c.timeBack,f,"forward")});const m=D();m.addEventListener("input",e=>{c.ticketCount=e.target.value,R(c.ticketCount)});const P=N("\u041F\u043E\u0441\u0447\u0438\u0442\u0430\u0442\u044C");O.append(T);function z(e){switch(y(),G(),$(),e){case"forward":u.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0410 \u0432 \u0412</h2>',u.append(f);break;case"back":d.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0412 \u0432 \u0410</h2>',d.append(p);break;case"both":u.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0410 \u0432 \u0412</h2>',u.append(f),d.innerHTML='<h2 class="subtitle">\u0412\u044B\u0431\u0435\u0440\u0438 \u0432\u0440\u0435\u043C\u044F \u0438\u0437 \u0412 \u0432 \u0410</h2>',d.append(p);break}}function G(){K(),u.innerHTML="",d.innerHTML="",f.value="",p.value="",c.timeForward="",c.timeBack=""}function L(e,n,i){$(),e==="forward"&&n&&(l.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',l.append(m)),e==="back"&&i&&(l.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',l.append(m)),e==="both"&&n&&i&&(l.innerHTML='<h2 class="subtitle">\u0423\u043A\u0430\u0436\u0438 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0431\u0438\u043B\u0435\u0442\u043E\u0432</h2>',l.append(m))}function K(){l.innerHTML="",m.value=0,c.ticketCost=0}function R(e){$(),e>0?g.append(P):y()}function y(){g.innerHTML=""}function $(){v.innerHTML=""}
